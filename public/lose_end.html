<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="soul_painter/end/style.css">
    <title>You Lose~~~</title>
</head>
<body>
    <div id="box">
        <!-- header and exit button -->
        <div>
            <h1 id="header">
                You Lose!!! hahaha~~~
            </h1>
        </div>
        <hr>
        <!-- Result of the play -->
        <div id="box2">
            <div id="time_record">
                <p><b>Time: </b>
                    <span id="game_time">&#10006&#10006:&#10006&#10006:&#10006&#10006</span>
                </p>
                <p><b>Personal Best: </b>
                    <span id="personal_best">&#10006&#10006:&#10006&#10006:&#10006&#10006</span>
                </p>
                <p><b>Best: </b>
                    <span id="all_best">&#10006&#10006:&#10006&#10006:&#10006&#10006</span>
                </p>
            </div>
            <!-- Others bottom -->
            <div id="button_set">
                <a href="/lose/ranking">
                    <button id="leave_button">Ranking</button>
                </a>
                <br><br>
                <a href="/menu">
                    <button id="leave_button" onclick="clear();">Back</button>
                </a>
                <br><br>
                <a href="/logout">
                    <button id="leave_button" onclick="clear();">Exit</button>
                </a>
            </div>
        </div>
        <!-- voc log -->
        <iframe src="wrong_answer.html" id="voc_list"></iframe>
        <!-- button to play again -->
        <a href="/game">
            <button id="play_again"  onclick="clear();">Play Again</button>
        </a>
        <!-- pointhead larry -->
        <img src="soul_painter/end/pointhead.png" id="pointhead">
    </div>
    <script>
        console.log(sessionStorage);
        
        // let time_str = sessionStorage.getItem("time_str");
        // let count_element = document.getElementById("game_time");
        // count_element.innerText = time_str;
        // console.log(time_str);

        let logFile = sessionStorage.getItem("log_file");
        console.log(logFile);
        document.getElementById("voc_list").src = logFile;
        
        let personal_best = sessionStorage.getItem("Personal Best");
        let personal_best_shown = document.getElementById("personal_best");
        if(!(personal_best == "null") && !(personal_best == "99:99:99"))
            personal_best_shown.innerText = personal_best;
        console.log(personal_best);

        let all_best = sessionStorage.getItem("All Best");
        let all_best_shown = document.getElementById("all_best");
        if (!(all_best.substring(0, 8) == "99:99:99") && !(all_best == "null"))
            all_best_shown.innerText = all_best.substring(0, 8); // not showing userID
        
        console.log(typeof all_best);

        function clear(){
            console.log("exit and clear")
            sessionStorage.clear();
        }
    </script>
</body>
</html>